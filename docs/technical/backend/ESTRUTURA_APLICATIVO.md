# GuardFlow - Estrutura do Aplicativo

## üîç An√°lise da Estrutura Atual

### **Status Atual: Landing Page Bem Estruturada**
Voc√™ j√° criou uma **landing page impressionante** com:
- ‚úÖ **HTML sem√¢ntico** bem organizado
- ‚úÖ **CSS moderno** com vari√°veis CSS e design responsivo
- ‚úÖ **JavaScript funcional** com navega√ß√£o e demos
- ‚úÖ **Se√ß√µes completas**: Hero, Features, Demo, Tech, Roadmap, Investment
- ‚úÖ **Design profissional** com gradientes e anima√ß√µes

### **Pontos Fortes da Estrutura Atual**

#### **1. HTML Estruturado (index.html)**
```html
Estrutura bem organizada:
‚îú‚îÄ‚îÄ Navigation (navbar responsiva)
‚îú‚îÄ‚îÄ Hero Section (call-to-action principal)
‚îú‚îÄ‚îÄ Features (6 recursos principais)
‚îú‚îÄ‚îÄ Demo Interativa (5 telas)
‚îú‚îÄ‚îÄ Technology Stack (4 categorias)
‚îú‚îÄ‚îÄ Roadmap (6 fases de desenvolvimento)
‚îú‚îÄ‚îÄ Investment (formul√°rio de investidores)
‚îú‚îÄ‚îÄ Contact (informa√ß√µes de contato)
‚îî‚îÄ‚îÄ Footer (links e redes sociais)
```

#### **2. CSS Moderno (styles.css)**
```css
Caracter√≠sticas t√©cnicas:
‚îú‚îÄ‚îÄ CSS Variables (--primary-green, --primary-blue, etc.)
‚îú‚îÄ‚îÄ Design Responsivo (media queries)
‚îú‚îÄ‚îÄ Gradientes modernos (linear-gradient)
‚îú‚îÄ‚îÄ Anima√ß√µes CSS (transitions, transforms)
‚îú‚îÄ‚îÄ Typography (Inter font family)
‚îú‚îÄ‚îÄ Component-based (navbar, hero, features, etc.)
‚îî‚îÄ‚îÄ Mobile-first approach
```

#### **3. JavaScript Funcional (main.js)**
```javascript
Funcionalidades implementadas:
‚îú‚îÄ‚îÄ Navigation (smooth scrolling, mobile menu)
‚îú‚îÄ‚îÄ Scroll Effects (parallax, fade-in)
‚îú‚îÄ‚îÄ Demo System (interactive demos)
‚îú‚îÄ‚îÄ Form Handling (investment, contact)
‚îú‚îÄ‚îÄ Animations (entrance effects)
‚îî‚îÄ‚îÄ Mobile Responsiveness
```

## üöÄ Estrutura Proposta: Aplicativo Mobile

### **Vis√£o Geral: Do Website para App**
Agora precisamos **evoluir da landing page para o aplicativo mobile** real. Vou propor uma estrutura robusta e escal√°vel:

```
GuardFlow-App/
‚îú‚îÄ‚îÄ üì± Mobile App (React Native)
‚îú‚îÄ‚îÄ üåê Backend API (FastAPI)
‚îú‚îÄ‚îÄ üóÑÔ∏è Database (PostgreSQL + Redis)
‚îú‚îÄ‚îÄ ‚õìÔ∏è Blockchain (Smart Contracts)
‚îú‚îÄ‚îÄ ü§ñ AI Services (Computer Vision + ML)
‚îî‚îÄ‚îÄ ‚òÅÔ∏è Infrastructure (Docker + AWS)
```

### **1. Estrutura do Mobile App (React Native)**

#### **Arquitetura de Pastas**
```
src/
‚îú‚îÄ‚îÄ components/           # Componentes reutiliz√°veis
‚îÇ   ‚îú‚îÄ‚îÄ common/          # Bot√µes, inputs, cards
‚îÇ   ‚îú‚îÄ‚îÄ forms/           # Formul√°rios espec√≠ficos
‚îÇ   ‚îú‚îÄ‚îÄ navigation/      # Componentes de navega√ß√£o
‚îÇ   ‚îî‚îÄ‚îÄ scanner/         # Componentes do scanner
‚îú‚îÄ‚îÄ screens/             # Telas do aplicativo
‚îÇ   ‚îú‚îÄ‚îÄ auth/           # Login, registro, onboarding
‚îÇ   ‚îú‚îÄ‚îÄ shopping/       # Scanner, carrinho, checkout
‚îÇ   ‚îú‚îÄ‚îÄ rewards/        # Tokens GST, NFTs, recompensas
‚îÇ   ‚îú‚îÄ‚îÄ profile/        # Perfil, hist√≥rico, configura√ß√µes
‚îÇ   ‚îî‚îÄ‚îÄ wallet/         # Carteira digital, pagamentos
‚îú‚îÄ‚îÄ services/           # Servi√ßos e APIs
‚îÇ   ‚îú‚îÄ‚îÄ api/           # Chamadas para backend
‚îÇ   ‚îú‚îÄ‚îÄ auth/          # Autentica√ß√£o e autoriza√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ blockchain/    # Intera√ß√£o com blockchain
‚îÇ   ‚îú‚îÄ‚îÄ camera/        # Scanner e computer vision
‚îÇ   ‚îî‚îÄ‚îÄ storage/       # Armazenamento local
‚îú‚îÄ‚îÄ store/             # Gerenciamento de estado (Redux)
‚îÇ   ‚îú‚îÄ‚îÄ slices/        # Redux Toolkit slices
‚îÇ   ‚îú‚îÄ‚îÄ middleware/    # Middleware customizado
‚îÇ   ‚îî‚îÄ‚îÄ persist/       # Persist√™ncia de estado
‚îú‚îÄ‚îÄ utils/             # Utilit√°rios e helpers
‚îÇ   ‚îú‚îÄ‚îÄ constants/     # Constantes da aplica√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ helpers/       # Fun√ß√µes auxiliares
‚îÇ   ‚îú‚îÄ‚îÄ hooks/         # Custom hooks
‚îÇ   ‚îî‚îÄ‚îÄ validators/    # Valida√ß√µes
‚îú‚îÄ‚îÄ assets/            # Recursos est√°ticos
‚îÇ   ‚îú‚îÄ‚îÄ images/        # Imagens e √≠cones
‚îÇ   ‚îú‚îÄ‚îÄ fonts/         # Fontes customizadas
‚îÇ   ‚îî‚îÄ‚îÄ animations/    # Anima√ß√µes Lottie
‚îî‚îÄ‚îÄ styles/            # Estilos globais
    ‚îú‚îÄ‚îÄ colors.js      # Paleta de cores
    ‚îú‚îÄ‚îÄ typography.js  # Tipografia
    ‚îî‚îÄ‚îÄ spacing.js     # Espa√ßamentos
```

#### **Telas Principais do App**

##### **1. Onboarding & Auth**
```
screens/auth/
‚îú‚îÄ‚îÄ OnboardingScreen.js    # Introdu√ß√£o ao app (4 telas)
‚îú‚îÄ‚îÄ LoginScreen.js         # Login com email/biometria
‚îú‚îÄ‚îÄ RegisterScreen.js      # Cadastro de usu√°rio
‚îú‚îÄ‚îÄ BiometricSetupScreen.js # Configura√ß√£o biom√©trica
‚îî‚îÄ‚îÄ PermissionsScreen.js   # Solicita√ß√£o de permiss√µes
```

##### **2. Shopping Experience**
```
screens/shopping/
‚îú‚îÄ‚îÄ ScannerScreen.js       # Scanner principal (c√¢mera + IA)
‚îú‚îÄ‚îÄ ProductScreen.js       # Detalhes do produto escaneado
‚îú‚îÄ‚îÄ CartScreen.js          # Carrinho de compras
‚îú‚îÄ‚îÄ CheckoutScreen.js      # Finaliza√ß√£o da compra
‚îî‚îÄ‚îÄ ReceiptScreen.js       # Recibo e NFe tokenizada
```

##### **3. Rewards & Tokens**
```
screens/rewards/
‚îú‚îÄ‚îÄ TokensScreen.js        # Saldo GST e hist√≥rico
‚îú‚îÄ‚îÄ NFTsScreen.js          # Cole√ß√£o de NFTs (NFe)
‚îú‚îÄ‚îÄ RewardsScreen.js       # Recompensas dispon√≠veis
‚îú‚îÄ‚îÄ MarketplaceScreen.js   # Marketplace de NFTs
‚îî‚îÄ‚îÄ ESGScreen.js           # Impacto ESG pessoal
```

##### **4. Profile & Wallet**
```
screens/profile/
‚îú‚îÄ‚îÄ ProfileScreen.js       # Perfil do usu√°rio
‚îú‚îÄ‚îÄ WalletScreen.js        # Carteira digital
‚îú‚îÄ‚îÄ HistoryScreen.js       # Hist√≥rico de compras
‚îú‚îÄ‚îÄ SettingsScreen.js      # Configura√ß√µes
‚îî‚îÄ‚îÄ HelpScreen.js          # Central de ajuda
```

### **2. Estrutura do Backend (FastAPI)**

#### **Arquitetura de Microservi√ßos**
```
backend/
‚îú‚îÄ‚îÄ api/                 # API Gateway
‚îÇ   ‚îú‚îÄ‚îÄ auth/           # Autentica√ß√£o e autoriza√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ users/          # Gest√£o de usu√°rios
‚îÇ   ‚îú‚îÄ‚îÄ products/       # Cat√°logo de produtos
‚îÇ   ‚îú‚îÄ‚îÄ transactions/   # Transa√ß√µes e pagamentos
‚îÇ   ‚îú‚îÄ‚îÄ tokens/         # Tokens GST e NFTs
‚îÇ   ‚îî‚îÄ‚îÄ analytics/      # Analytics e relat√≥rios
‚îú‚îÄ‚îÄ services/           # Microservi√ßos
‚îÇ   ‚îú‚îÄ‚îÄ scanner/        # Computer Vision Service
‚îÇ   ‚îú‚îÄ‚îÄ blockchain/     # Blockchain Integration
‚îÇ   ‚îú‚îÄ‚îÄ payments/       # Payment Processing
‚îÇ   ‚îú‚îÄ‚îÄ notifications/  # Push Notifications
‚îÇ   ‚îî‚îÄ‚îÄ esg/           # ESG Data Processing
‚îú‚îÄ‚îÄ models/            # Modelos de dados
‚îÇ   ‚îú‚îÄ‚îÄ user.py        # Modelo de usu√°rio
‚îÇ   ‚îú‚îÄ‚îÄ product.py     # Modelo de produto
‚îÇ   ‚îú‚îÄ‚îÄ transaction.py # Modelo de transa√ß√£o
‚îÇ   ‚îî‚îÄ‚îÄ token.py       # Modelo de token
‚îú‚îÄ‚îÄ database/          # Configura√ß√£o de banco
‚îÇ   ‚îú‚îÄ‚îÄ migrations/    # Migra√ß√µes do banco
‚îÇ   ‚îú‚îÄ‚îÄ seeds/         # Dados iniciais
‚îÇ   ‚îî‚îÄ‚îÄ connection.py  # Conex√£o com PostgreSQL
‚îú‚îÄ‚îÄ blockchain/        # Smart Contracts
‚îÇ   ‚îú‚îÄ‚îÄ contracts/     # Contratos Solidity
‚îÇ   ‚îú‚îÄ‚îÄ migrations/    # Deploy scripts
‚îÇ   ‚îî‚îÄ‚îÄ abi/          # ABIs dos contratos
‚îî‚îÄ‚îÄ utils/            # Utilit√°rios
    ‚îú‚îÄ‚îÄ security.py    # Fun√ß√µes de seguran√ßa
    ‚îú‚îÄ‚îÄ validators.py  # Valida√ß√µes
    ‚îî‚îÄ‚îÄ helpers.py     # Fun√ß√µes auxiliares
```

### **3. Estrutura de Dados**

#### **Banco de Dados Principal (PostgreSQL)**
```sql
-- Usu√°rios
users (
    id UUID PRIMARY KEY,
    email VARCHAR UNIQUE,
    name VARCHAR,
    phone VARCHAR,
    wallet_address VARCHAR,
    gst_balance DECIMAL,
    created_at TIMESTAMP
);

-- Produtos
products (
    id UUID PRIMARY KEY,
    barcode VARCHAR UNIQUE,
    name VARCHAR,
    brand VARCHAR,
    price DECIMAL,
    esg_score INTEGER,
    created_at TIMESTAMP
);

-- Transa√ß√µes
transactions (
    id UUID PRIMARY KEY,
    user_id UUID REFERENCES users(id),
    total_amount DECIMAL,
    gst_earned INTEGER,
    nfe_hash VARCHAR,
    nft_token_id VARCHAR,
    created_at TIMESTAMP
);

-- NFTs (NFe Tokenizada)
nfts (
    id UUID PRIMARY KEY,
    transaction_id UUID REFERENCES transactions(id),
    token_id VARCHAR UNIQUE,
    metadata_uri VARCHAR,
    esg_data JSONB,
    created_at TIMESTAMP
);
```

#### **Cache e Sess√µes (Redis)**
```
Redis Structure:
‚îú‚îÄ‚îÄ user_sessions:{user_id}     # Sess√µes de usu√°rio
‚îú‚îÄ‚îÄ product_cache:{barcode}     # Cache de produtos
‚îú‚îÄ‚îÄ gst_balance:{user_id}       # Saldo GST em tempo real
‚îú‚îÄ‚îÄ scanner_results:{session}   # Resultados do scanner
‚îî‚îÄ‚îÄ rate_limits:{user_id}       # Rate limiting
```

### **4. Componentes Principais do App**

#### **Scanner Component (Core)**
```javascript
// components/scanner/CameraScanner.js
import { Camera } from 'react-native-vision-camera';
import { runOnJS, runOnUI } from 'react-native-reanimated';

const CameraScanner = ({ onProductDetected }) => {
  // IA para reconhecimento de produtos
  const processFrame = useCallback((frame) => {
    'worklet';
    
    // Computer Vision processing
    const products = detectProducts(frame);
    
    if (products.length > 0) {
      runOnJS(onProductDetected)(products[0]);
    }
  }, [onProductDetected]);

  return (
    <Camera
      style={styles.camera}
      device={device}
      isActive={true}
      frameProcessor={processFrame}
      frameProcessorFps={5}
    />
  );
};
```

#### **Token Management**
```javascript
// services/blockchain/tokenService.js
class TokenService {
  async earnGSTTokens(userId, amount, reason) {
    // Mint GST tokens para o usu√°rio
    const transaction = await this.gstContract.mint(
      userWallet, 
      amount,
      { reason, timestamp: Date.now() }
    );
    
    return transaction;
  }

  async createNFT(transactionData) {
    // Criar NFT da NFe
    const metadata = {
      name: `NFe #${transactionData.id}`,
      description: 'Nota Fiscal Eletr√¥nica Tokenizada',
      image: transactionData.qrCode,
      attributes: [
        { trait_type: 'ESG Score', value: transactionData.esgScore },
        { trait_type: 'Store', value: transactionData.store },
        { trait_type: 'Total', value: transactionData.total }
      ]
    };

    const nft = await this.nftContract.mint(
      userWallet,
      metadata
    );

    return nft;
  }
}
```

#### **ESG Calculation Engine**
```javascript
// services/esg/esgCalculator.js
class ESGCalculator {
  calculateProductESG(product) {
    const scores = {
      environmental: this.calculateEnvironmental(product),
      social: this.calculateSocial(product),
      governance: this.calculateGovernance(product)
    };

    return {
      total: (scores.environmental + scores.social + scores.governance) / 3,
      breakdown: scores,
      gstReward: this.calculateGSTReward(scores.total)
    };
  }

  calculateEnvironmental(product) {
    let score = 50; // Base score
    
    // Produto org√¢nico
    if (product.isOrganic) score += 20;
    
    // Embalagem sustent√°vel
    if (product.sustainablePackaging) score += 15;
    
    // Produ√ß√£o local
    if (product.isLocal) score += 10;
    
    // Carbon footprint baixo
    if (product.lowCarbon) score += 5;
    
    return Math.min(score, 100);
  }

  calculateGSTReward(esgScore) {
    // Quanto maior o ESG score, mais GST tokens
    return Math.floor(esgScore / 10); // 10 ESG = 1 GST
  }
}
```

### **5. Fluxo de Uso do App**

#### **Jornada do Usu√°rio**
```
1. Onboarding
   ‚îú‚îÄ‚îÄ Apresenta√ß√£o do app (4 telas)
   ‚îú‚îÄ‚îÄ Cadastro/Login
   ‚îú‚îÄ‚îÄ Configura√ß√£o biom√©trica
   ‚îî‚îÄ‚îÄ Permiss√µes (c√¢mera, localiza√ß√£o)

2. Shopping
   ‚îú‚îÄ‚îÄ Abrir scanner
   ‚îú‚îÄ‚îÄ Escanear produto (IA identifica)
   ‚îú‚îÄ‚îÄ Ver detalhes + ESG score
   ‚îú‚îÄ‚îÄ Adicionar ao carrinho
   ‚îú‚îÄ‚îÄ Continuar escaneando
   ‚îî‚îÄ‚îÄ Finalizar compra

3. Checkout
   ‚îú‚îÄ‚îÄ Revisar carrinho
   ‚îú‚îÄ‚îÄ Escolher pagamento
   ‚îú‚îÄ‚îÄ Confirmar compra
   ‚îú‚îÄ‚îÄ Processar pagamento
   ‚îú‚îÄ‚îÄ Gerar NFe
   ‚îú‚îÄ‚îÄ Tokenizar NFe (criar NFT)
   ‚îú‚îÄ‚îÄ Distribuir GST tokens
   ‚îî‚îÄ‚îÄ Mostrar recibo

4. Rewards
   ‚îú‚îÄ‚îÄ Ver saldo GST
   ‚îú‚îÄ‚îÄ Ver cole√ß√£o NFTs
   ‚îú‚îÄ‚îÄ Trocar GST por desconto
   ‚îú‚îÄ‚îÄ Vender NFTs no marketplace
   ‚îî‚îÄ‚îÄ Ver impacto ESG
```

### **6. Tecnologias e Ferramentas**

#### **Frontend Mobile**
```javascript
{
  "dependencies": {
    "react-native": "0.72+",
    "react-navigation": "^6.0",
    "@reduxjs/toolkit": "^1.9",
    "react-native-vision-camera": "^3.0",
    "react-native-biometrics": "^3.0",
    "react-native-reanimated": "^3.0",
    "react-native-gesture-handler": "^2.0",
    "react-native-vector-icons": "^9.0",
    "react-native-async-storage": "^1.19",
    "react-native-keychain": "^8.0",
    "web3": "^4.0",
    "@walletconnect/react-native": "^2.0"
  }
}
```

#### **Backend API**
```python
# requirements.txt
fastapi==0.104.1
uvicorn==0.24.0
sqlalchemy==2.0.23
alembic==1.13.0
psycopg2-binary==2.9.9
redis==5.0.1
celery==5.3.4
web3==6.11.3
opencv-python==4.8.1
tensorflow==2.14.0
pydantic==2.5.0
python-jose==3.3.0
passlib==1.7.4
boto3==1.34.0
```

#### **Infrastructure**
```yaml
# docker-compose.yml
version: '3.8'
services:
  app:
    build: .
    ports:
      - "8000:8000"
    depends_on:
      - db
      - redis
      
  db:
    image: postgres:15
    environment:
      POSTGRES_DB: guardflow
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: password
      
  redis:
    image: redis:7
    ports:
      - "6379:6379"
      
  blockchain:
    image: ethereum/client-go:latest
    ports:
      - "8545:8545"
```

## üéØ Pr√≥ximos Passos

### **Fase 1: Setup do Projeto (Esta Semana)**
1. **Configurar ambiente React Native**
2. **Criar estrutura de pastas**
3. **Implementar navega√ß√£o b√°sica**
4. **Configurar Redux store**

### **Fase 2: Core Features (Pr√≥ximas 2 semanas)**
1. **Implementar scanner com IA**
2. **Criar sistema de autentica√ß√£o**
3. **Desenvolver carrinho de compras**
4. **Integrar sistema de pagamentos**

### **Fase 3: Blockchain Integration (Pr√≥ximas 4 semanas)**
1. **Implementar smart contracts**
2. **Criar sistema de tokens GST**
3. **Desenvolver NFTs de NFe**
4. **Integrar carteira digital**

### **Fase 4: Advanced Features (Pr√≥ximas 8 semanas)**
1. **Marketplace de NFTs**
2. **Sistema de recompensas**
3. **Analytics ESG**
4. **Otimiza√ß√µes de performance**

---

*Estrutura do Aplicativo GuardFlow - Sistema de Economia Urbana Tokenizada*



